{"ast":null,"code":"import _objectSpread from\"C:/Users/User/OneDrive/Documents/VSCode/web/WebAPPP/client/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import React,{useState,useEffect}from'react';import{Link}from'react-router-dom';import{ref,onValue}from'firebase/database';import{database}from'../../firebase';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const AdminDashboard=()=>{const[stats,setStats]=useState({totalPosts:0,totalUsers:0,totalComments:0,totalViews:0});useEffect(()=>{const fetchStats=async()=>{// Lấy số lượng bài viết\nconst postsRef=ref(database,'posts');onValue(postsRef,snapshot=>{const posts=snapshot.val()||{};const postsCount=Object.keys(posts).length;let totalViews=0;Object.values(posts).forEach(post=>{totalViews+=post.viewCount||0;});setStats(prevStats=>_objectSpread(_objectSpread({},prevStats),{},{totalPosts:postsCount,totalViews}));});// Lấy số lượng người dùng\nconst usersRef=ref(database,'users');onValue(usersRef,snapshot=>{const users=snapshot.val()||{};const usersCount=Object.keys(users).length;setStats(prevStats=>_objectSpread(_objectSpread({},prevStats),{},{totalUsers:usersCount}));});// Lấy số lượng bình luận\nconst commentsRef=ref(database,'comments');onValue(commentsRef,snapshot=>{const commentsData=snapshot.val()||{};let commentsCount=0;Object.values(commentsData).forEach(postComments=>{commentsCount+=Object.keys(postComments).length;});setStats(prevStats=>_objectSpread(_objectSpread({},prevStats),{},{totalComments:commentsCount}));});};fetchStats();},[]);return/*#__PURE__*/_jsxs(\"div\",{className:\"admin-dashboard-container\",children:[/*#__PURE__*/_jsx(\"h1\",{children:\"B\\u1EA3ng \\u0111i\\u1EC1u khi\\u1EC3n Admin\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"admin-actions\",children:[/*#__PURE__*/_jsx(Link,{to:\"/admin/posts\",className:\"btn btn-primary\",children:\"Qu\\u1EA3n l\\xFD b\\xE0i vi\\u1EBFt\"}),/*#__PURE__*/_jsx(Link,{to:\"/admin/posts/create\",className:\"btn btn-success\",children:\"T\\u1EA1o b\\xE0i vi\\u1EBFt m\\u1EDBi\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"admin-dashboard\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"stat-card\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"stat-value\",children:stats.totalPosts}),/*#__PURE__*/_jsx(\"div\",{className:\"stat-label\",children:\"B\\xE0i vi\\u1EBFt\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"stat-card\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"stat-value\",children:stats.totalUsers}),/*#__PURE__*/_jsx(\"div\",{className:\"stat-label\",children:\"Ng\\u01B0\\u1EDDi d\\xF9ng\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"stat-card\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"stat-value\",children:stats.totalComments}),/*#__PURE__*/_jsx(\"div\",{className:\"stat-label\",children:\"B\\xECnh lu\\u1EADn\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"stat-card\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"stat-value\",children:stats.totalViews}),/*#__PURE__*/_jsx(\"div\",{className:\"stat-label\",children:\"L\\u01B0\\u1EE3t xem\"})]})]})]});};export default AdminDashboard;","map":{"version":3,"names":["React","useState","useEffect","Link","ref","onValue","database","jsx","_jsx","jsxs","_jsxs","AdminDashboard","stats","setStats","totalPosts","totalUsers","totalComments","totalViews","fetchStats","postsRef","snapshot","posts","val","postsCount","Object","keys","length","values","forEach","post","viewCount","prevStats","_objectSpread","usersRef","users","usersCount","commentsRef","commentsData","commentsCount","postComments","className","children","to"],"sources":["C:/Users/User/OneDrive/Documents/VSCode/web/WebAPPP/client/src/pages/admin/AdminDashboard.js"],"sourcesContent":["import React, { useState, useEffect } from 'react';\nimport { Link } from 'react-router-dom';\nimport { ref, onValue } from 'firebase/database';\nimport { database } from '../../firebase';\n\nconst AdminDashboard = () => {\n  const [stats, setStats] = useState({\n    totalPosts: 0,\n    totalUsers: 0,\n    totalComments: 0,\n    totalViews: 0\n  });\n\n  useEffect(() => {\n    const fetchStats = async () => {\n      // Lấy số lượng bài viết\n      const postsRef = ref(database, 'posts');\n      onValue(postsRef, (snapshot) => {\n        const posts = snapshot.val() || {};\n        const postsCount = Object.keys(posts).length;\n\n        let totalViews = 0;\n        Object.values(posts).forEach(post => {\n          totalViews += post.viewCount || 0;\n        });\n\n        setStats(prevStats => ({\n          ...prevStats,\n          totalPosts: postsCount,\n          totalViews\n        }));\n      });\n\n      // Lấy số lượng người dùng\n      const usersRef = ref(database, 'users');\n      onValue(usersRef, (snapshot) => {\n        const users = snapshot.val() || {};\n        const usersCount = Object.keys(users).length;\n\n        setStats(prevStats => ({\n          ...prevStats,\n          totalUsers: usersCount\n        }));\n      });\n\n      // Lấy số lượng bình luận\n      const commentsRef = ref(database, 'comments');\n      onValue(commentsRef, (snapshot) => {\n        const commentsData = snapshot.val() || {};\n        let commentsCount = 0;\n\n        Object.values(commentsData).forEach(postComments => {\n          commentsCount += Object.keys(postComments).length;\n        });\n\n        setStats(prevStats => ({\n          ...prevStats,\n          totalComments: commentsCount\n        }));\n      });\n    };\n\n    fetchStats();\n  }, []);\n\n  return (\n    <div className=\"admin-dashboard-container\">\n      <h1>Bảng điều khiển Admin</h1>\n\n      <div className=\"admin-actions\">\n        <Link to=\"/admin/posts\" className=\"btn btn-primary\">Quản lý bài viết</Link>\n        <Link to=\"/admin/posts/create\" className=\"btn btn-success\">Tạo bài viết mới</Link>\n      </div>\n\n      <div className=\"admin-dashboard\">\n        <div className=\"stat-card\">\n          <div className=\"stat-value\">{stats.totalPosts}</div>\n          <div className=\"stat-label\">Bài viết</div>\n        </div>\n\n        <div className=\"stat-card\">\n          <div className=\"stat-value\">{stats.totalUsers}</div>\n          <div className=\"stat-label\">Người dùng</div>\n        </div>\n\n        <div className=\"stat-card\">\n          <div className=\"stat-value\">{stats.totalComments}</div>\n          <div className=\"stat-label\">Bình luận</div>\n        </div>\n\n        <div className=\"stat-card\">\n          <div className=\"stat-value\">{stats.totalViews}</div>\n          <div className=\"stat-label\">Lượt xem</div>\n        </div>\n      </div>\n    </div>\n  );\n};\n\nexport default AdminDashboard;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}