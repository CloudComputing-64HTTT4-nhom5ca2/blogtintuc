{"ast":null,"code":"import _objectSpread from\"C:/Users/User/OneDrive/Documents/VSCode/web/WebAPPP/client/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import React,{useState,useEffect}from'react';import{Link}from'react-router-dom';import{ref,get,query,orderByChild,limitToLast}from'firebase/database';import{database}from'../firebase';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const Home=()=>{const[posts,setPosts]=useState([]);const[loading,setLoading]=useState(true);const[error,setError]=useState(null);useEffect(()=>{const fetchPosts=async()=>{try{const postsRef=ref(database,'posts');const snapshot=await get(postsRef);if(snapshot.exists()){const postsData=snapshot.val();const postsArray=Object.keys(postsData).map(id=>_objectSpread({id},postsData[id]));// Sắp xếp theo thời gian tạo giảm dần (mới nhất trước)\npostsArray.sort((a,b)=>b.createdAt-a.createdAt);setPosts(postsArray);}else{setPosts([]);}}catch(error){console.error('Lỗi khi lấy bài viết:',error);setError('Không thể tải bài viết. Vui lòng thử lại sau.');}finally{setLoading(false);}};fetchPosts();},[]);// Hàm rút gọn nội dung\nconst truncateContent=function(content){let maxLength=arguments.length>1&&arguments[1]!==undefined?arguments[1]:120;if(content.length<=maxLength)return content;return content.substring(0,maxLength)+'...';};// Định dạng ngày tháng\nconst formatDate=timestamp=>{if(!timestamp)return'';const date=new Date(timestamp);return date.toLocaleDateString('vi-VN',{year:'numeric',month:'long',day:'numeric'});};return/*#__PURE__*/_jsxs(\"div\",{className:\"home-container fade-in\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"home-header\",children:[/*#__PURE__*/_jsx(\"h1\",{className:\"home-title\",children:\"WebAPPP Blog\"}),/*#__PURE__*/_jsx(\"p\",{className:\"home-subtitle\",children:\"Kh\\xE1m ph\\xE1 c\\xE1c b\\xE0i vi\\u1EBFt ch\\u1EA5t l\\u01B0\\u1EE3ng v\\u1EC1 c\\xF4ng ngh\\u1EC7, tin t\\u1EE9c v\\xE0 nhi\\u1EC1u ch\\u1EE7 \\u0111\\u1EC1 th\\xFA v\\u1ECB kh\\xE1c\"})]}),error&&/*#__PURE__*/_jsx(\"div\",{className:\"error-message\",children:error}),loading?/*#__PURE__*/_jsx(\"div\",{className:\"loading-spinner\",children:/*#__PURE__*/_jsx(\"div\",{className:\"spinner\"})}):/*#__PURE__*/_jsx(\"div\",{className:\"post-grid\",children:posts.length>0?posts.map(post=>/*#__PURE__*/_jsxs(\"div\",{className:\"post-card\",children:[post.imageUrl&&/*#__PURE__*/_jsx(\"img\",{src:post.imageUrl,alt:post.title}),/*#__PURE__*/_jsxs(\"div\",{className:\"post-card-content\",children:[/*#__PURE__*/_jsx(\"h2\",{children:/*#__PURE__*/_jsx(Link,{to:\"/post/\".concat(post.id),children:post.title})}),/*#__PURE__*/_jsx(\"div\",{className:\"post-card-excerpt\",children:truncateContent(post.content)}),/*#__PURE__*/_jsxs(\"div\",{className:\"post-card-meta\",children:[/*#__PURE__*/_jsxs(\"span\",{children:[/*#__PURE__*/_jsx(\"i\",{className:\"far fa-calendar\"}),\" \",formatDate(post.createdAt)]}),/*#__PURE__*/_jsxs(\"span\",{children:[/*#__PURE__*/_jsx(\"i\",{className:\"far fa-eye\"}),\" \",post.viewCount||0]})]}),/*#__PURE__*/_jsx(\"div\",{className:\"post-card-actions\",children:/*#__PURE__*/_jsxs(Link,{to:\"/post/\".concat(post.id),className:\"btn btn-primary btn-sm\",children:[/*#__PURE__*/_jsx(\"i\",{className:\"fas fa-book-open\"}),\" \\u0110\\u1ECDc ti\\u1EBFp\"]})})]})]},post.id)):/*#__PURE__*/_jsx(\"div\",{className:\"no-posts\",children:/*#__PURE__*/_jsx(\"p\",{children:\"Ch\\u01B0a c\\xF3 b\\xE0i vi\\u1EBFt n\\xE0o.\"})})})]});};export default Home;","map":{"version":3,"names":["React","useState","useEffect","Link","ref","get","query","orderByChild","limitToLast","database","jsx","_jsx","jsxs","_jsxs","Home","posts","setPosts","loading","setLoading","error","setError","fetchPosts","postsRef","snapshot","exists","postsData","val","postsArray","Object","keys","map","id","_objectSpread","sort","a","b","createdAt","console","truncateContent","content","maxLength","arguments","length","undefined","substring","formatDate","timestamp","date","Date","toLocaleDateString","year","month","day","className","children","post","imageUrl","src","alt","title","to","concat","viewCount"],"sources":["C:/Users/User/OneDrive/Documents/VSCode/web/WebAPPP/client/src/pages/Home.js"],"sourcesContent":["import React, { useState, useEffect } from 'react';\nimport { Link } from 'react-router-dom';\nimport { ref, get, query, orderByChild, limitToLast } from 'firebase/database';\nimport { database } from '../firebase';\n\nconst Home = () => {\n  const [posts, setPosts] = useState([]);\n  const [loading, setLoading] = useState(true);\n  const [error, setError] = useState(null);\n\n  useEffect(() => {\n    const fetchPosts = async () => {\n      try {\n        const postsRef = ref(database, 'posts');\n        const snapshot = await get(postsRef);\n\n        if (snapshot.exists()) {\n          const postsData = snapshot.val();\n          const postsArray = Object.keys(postsData).map(id => ({\n            id,\n            ...postsData[id]\n          }));\n\n          // Sắp xếp theo thời gian tạo giảm dần (mới nhất trước)\n          postsArray.sort((a, b) => b.createdAt - a.createdAt);\n\n          setPosts(postsArray);\n        } else {\n          setPosts([]);\n        }\n      } catch (error) {\n        console.error('Lỗi khi lấy bài viết:', error);\n        setError('Không thể tải bài viết. Vui lòng thử lại sau.');\n      } finally {\n        setLoading(false);\n      }\n    };\n\n    fetchPosts();\n  }, []);\n\n  // Hàm rút gọn nội dung\n  const truncateContent = (content, maxLength = 120) => {\n    if (content.length <= maxLength) return content;\n    return content.substring(0, maxLength) + '...';\n  };\n\n  // Định dạng ngày tháng\n  const formatDate = (timestamp) => {\n    if (!timestamp) return '';\n    const date = new Date(timestamp);\n    return date.toLocaleDateString('vi-VN', {\n      year: 'numeric',\n      month: 'long',\n      day: 'numeric'\n    });\n  };\n\n  return (\n    <div className=\"home-container fade-in\">\n      <div className=\"home-header\">\n        <h1 className=\"home-title\">WebAPPP Blog</h1>\n        <p className=\"home-subtitle\">\n          Khám phá các bài viết chất lượng về công nghệ, tin tức và nhiều chủ đề thú vị khác\n        </p>\n      </div>\n\n      {error && <div className=\"error-message\">{error}</div>}\n\n      {loading ? (\n        <div className=\"loading-spinner\">\n          <div className=\"spinner\"></div>\n        </div>\n      ) : (\n        <div className=\"post-grid\">\n          {posts.length > 0 ? (\n            posts.map(post => (\n              <div className=\"post-card\" key={post.id}>\n                {post.imageUrl && (\n                  <img src={post.imageUrl} alt={post.title} />\n                )}\n                <div className=\"post-card-content\">\n                  <h2>\n                    <Link to={`/post/${post.id}`}>{post.title}</Link>\n                  </h2>\n                  <div className=\"post-card-excerpt\">\n                    {truncateContent(post.content)}\n                  </div>\n                  <div className=\"post-card-meta\">\n                    <span>\n                      <i className=\"far fa-calendar\"></i> {formatDate(post.createdAt)}\n                    </span>\n                    <span>\n                      <i className=\"far fa-eye\"></i> {post.viewCount || 0}\n                    </span>\n                  </div>\n                  <div className=\"post-card-actions\">\n                    <Link to={`/post/${post.id}`} className=\"btn btn-primary btn-sm\">\n                      <i className=\"fas fa-book-open\"></i> Đọc tiếp\n                    </Link>\n                  </div>\n                </div>\n              </div>\n            ))\n          ) : (\n            <div className=\"no-posts\">\n              <p>Chưa có bài viết nào.</p>\n            </div>\n          )}\n        </div>\n      )}\n    </div>\n  );\n};\n\nexport default Home;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}