{"ast":null,"code":"import _objectSpread from\"C:/Users/User/OneDrive/Documents/VSCode/web/WebAPPP/client/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import React,{useState,useEffect}from'react';import{database}from'../../firebase';import{ref,get,update}from'firebase/database';import AdminSidebar from'../../components/AdminSidebar';import'../../styles/Admin.css';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const Settings=()=>{const[settings,setSettings]=useState({siteName:'WebAPPP Blog',siteDescription:'Blog tin tức hiện đại với Firebase',postsPerPage:10,enableComments:true,enableRegistration:true});const[loading,setLoading]=useState(true);const[saving,setSaving]=useState(false);const[message,setMessage]=useState('');useEffect(()=>{const fetchSettings=async()=>{try{const settingsRef=ref(database,'settings');const snapshot=await get(settingsRef);if(snapshot.exists()){setSettings(snapshot.val());}}catch(error){console.error(\"Lỗi khi tải cài đặt:\",error);}finally{setLoading(false);}};fetchSettings();},[]);const handleChange=e=>{const{name,value,type,checked}=e.target;setSettings(_objectSpread(_objectSpread({},settings),{},{[name]:type==='checkbox'?checked:value}));};const handleSubmit=async e=>{e.preventDefault();setSaving(true);setMessage('');try{await update(ref(database,'settings'),settings);setMessage('Cài đặt đã được lưu thành công!');setTimeout(()=>setMessage(''),3000);}catch(error){console.error('Lỗi khi lưu cài đặt:',error);setMessage('Đã xảy ra lỗi khi lưu cài đặt.');}finally{setSaving(false);}};if(loading){return/*#__PURE__*/_jsxs(\"div\",{className:\"admin-container\",children:[/*#__PURE__*/_jsx(AdminSidebar,{}),/*#__PURE__*/_jsx(\"div\",{className:\"admin-content\",children:/*#__PURE__*/_jsx(\"div\",{className:\"loading\",children:/*#__PURE__*/_jsx(\"div\",{className:\"spinner\"})})})]});}return/*#__PURE__*/_jsxs(\"div\",{className:\"admin-container\",children:[/*#__PURE__*/_jsx(AdminSidebar,{}),/*#__PURE__*/_jsxs(\"div\",{className:\"admin-content\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"admin-header\",children:/*#__PURE__*/_jsx(\"h1\",{className:\"admin-title\",children:\"C\\xE0i \\u0111\\u1EB7t h\\u1EC7 th\\u1ED1ng\"})}),message&&/*#__PURE__*/_jsx(\"div\",{className:\"message \".concat(message.includes('lỗi')?'error':'success'),children:message}),/*#__PURE__*/_jsx(\"div\",{className:\"settings-form-container\",children:/*#__PURE__*/_jsxs(\"form\",{onSubmit:handleSubmit,className:\"settings-form\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"form-section\",children:[/*#__PURE__*/_jsx(\"h3\",{children:\"C\\xE0i \\u0111\\u1EB7t chung\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"form-group\",children:[/*#__PURE__*/_jsx(\"label\",{htmlFor:\"siteName\",children:\"T\\xEAn trang web\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",id:\"siteName\",name:\"siteName\",value:settings.siteName,onChange:handleChange,className:\"form-control\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"form-group\",children:[/*#__PURE__*/_jsx(\"label\",{htmlFor:\"siteDescription\",children:\"M\\xF4 t\\u1EA3 trang web\"}),/*#__PURE__*/_jsx(\"textarea\",{id:\"siteDescription\",name:\"siteDescription\",value:settings.siteDescription,onChange:handleChange,className:\"form-control\",rows:\"3\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"form-group\",children:[/*#__PURE__*/_jsx(\"label\",{htmlFor:\"postsPerPage\",children:\"S\\u1ED1 b\\xE0i vi\\u1EBFt m\\u1ED7i trang\"}),/*#__PURE__*/_jsx(\"input\",{type:\"number\",id:\"postsPerPage\",name:\"postsPerPage\",value:settings.postsPerPage,onChange:handleChange,className:\"form-control\",min:\"1\",max:\"50\"})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"form-section\",children:[/*#__PURE__*/_jsx(\"h3\",{children:\"C\\xE0i \\u0111\\u1EB7t t\\u01B0\\u01A1ng t\\xE1c\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"form-check\",children:[/*#__PURE__*/_jsx(\"input\",{type:\"checkbox\",id:\"enableComments\",name:\"enableComments\",checked:settings.enableComments,onChange:handleChange,className:\"form-check-input\"}),/*#__PURE__*/_jsx(\"label\",{htmlFor:\"enableComments\",className:\"form-check-label\",children:\"Cho ph\\xE9p b\\xECnh lu\\u1EADn\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"form-check\",children:[/*#__PURE__*/_jsx(\"input\",{type:\"checkbox\",id:\"enableRegistration\",name:\"enableRegistration\",checked:settings.enableRegistration,onChange:handleChange,className:\"form-check-input\"}),/*#__PURE__*/_jsx(\"label\",{htmlFor:\"enableRegistration\",className:\"form-check-label\",children:\"Cho ph\\xE9p \\u0111\\u0103ng k\\xFD t\\xE0i kho\\u1EA3n m\\u1EDBi\"})]})]}),/*#__PURE__*/_jsx(\"div\",{className:\"form-actions\",children:/*#__PURE__*/_jsx(\"button\",{type:\"submit\",className:\"btn-save\",disabled:saving,children:saving?'Đang lưu...':'Lưu cài đặt'})})]})})]})]});};export default Settings;","map":{"version":3,"names":["React","useState","useEffect","database","ref","get","update","AdminSidebar","jsx","_jsx","jsxs","_jsxs","Settings","settings","setSettings","siteName","siteDescription","postsPerPage","enableComments","enableRegistration","loading","setLoading","saving","setSaving","message","setMessage","fetchSettings","settingsRef","snapshot","exists","val","error","console","handleChange","e","name","value","type","checked","target","_objectSpread","handleSubmit","preventDefault","setTimeout","className","children","concat","includes","onSubmit","htmlFor","id","onChange","rows","min","max","disabled"],"sources":["C:/Users/User/OneDrive/Documents/VSCode/web/WebAPPP/client/src/pages/admin/Settings.js"],"sourcesContent":["import React, { useState, useEffect } from 'react';\nimport { database } from '../../firebase';\nimport { ref, get, update } from 'firebase/database';\nimport AdminSidebar from '../../components/AdminSidebar';\nimport '../../styles/Admin.css';\n\nconst Settings = () => {\n  const [settings, setSettings] = useState({\n    siteName: 'WebAPPP Blog',\n    siteDescription: 'Blog tin tức hiện đại với Firebase',\n    postsPerPage: 10,\n    enableComments: true,\n    enableRegistration: true\n  });\n  const [loading, setLoading] = useState(true);\n  const [saving, setSaving] = useState(false);\n  const [message, setMessage] = useState('');\n\n  useEffect(() => {\n    const fetchSettings = async () => {\n      try {\n        const settingsRef = ref(database, 'settings');\n        const snapshot = await get(settingsRef);\n\n        if (snapshot.exists()) {\n          setSettings(snapshot.val());\n        }\n      } catch (error) {\n        console.error(\"Lỗi khi tải cài đặt:\", error);\n      } finally {\n        setLoading(false);\n      }\n    };\n\n    fetchSettings();\n  }, []);\n\n  const handleChange = (e) => {\n    const { name, value, type, checked } = e.target;\n    setSettings({\n      ...settings,\n      [name]: type === 'checkbox' ? checked : value\n    });\n  };\n\n  const handleSubmit = async (e) => {\n    e.preventDefault();\n    setSaving(true);\n    setMessage('');\n\n    try {\n      await update(ref(database, 'settings'), settings);\n      setMessage('Cài đặt đã được lưu thành công!');\n      setTimeout(() => setMessage(''), 3000);\n    } catch (error) {\n      console.error('Lỗi khi lưu cài đặt:', error);\n      setMessage('Đã xảy ra lỗi khi lưu cài đặt.');\n    } finally {\n      setSaving(false);\n    }\n  };\n\n  if (loading) {\n    return (\n      <div className=\"admin-container\">\n        <AdminSidebar />\n        <div className=\"admin-content\">\n          <div className=\"loading\">\n            <div className=\"spinner\"></div>\n          </div>\n        </div>\n      </div>\n    );\n  }\n\n  return (\n    <div className=\"admin-container\">\n      <AdminSidebar />\n\n      <div className=\"admin-content\">\n        <div className=\"admin-header\">\n          <h1 className=\"admin-title\">Cài đặt hệ thống</h1>\n        </div>\n\n        {message && (\n          <div className={`message ${message.includes('lỗi') ? 'error' : 'success'}`}>\n            {message}\n          </div>\n        )}\n\n        <div className=\"settings-form-container\">\n          <form onSubmit={handleSubmit} className=\"settings-form\">\n            <div className=\"form-section\">\n              <h3>Cài đặt chung</h3>\n\n              <div className=\"form-group\">\n                <label htmlFor=\"siteName\">Tên trang web</label>\n                <input\n                  type=\"text\"\n                  id=\"siteName\"\n                  name=\"siteName\"\n                  value={settings.siteName}\n                  onChange={handleChange}\n                  className=\"form-control\"\n                />\n              </div>\n\n              <div className=\"form-group\">\n                <label htmlFor=\"siteDescription\">Mô tả trang web</label>\n                <textarea\n                  id=\"siteDescription\"\n                  name=\"siteDescription\"\n                  value={settings.siteDescription}\n                  onChange={handleChange}\n                  className=\"form-control\"\n                  rows=\"3\"\n                ></textarea>\n              </div>\n\n              <div className=\"form-group\">\n                <label htmlFor=\"postsPerPage\">Số bài viết mỗi trang</label>\n                <input\n                  type=\"number\"\n                  id=\"postsPerPage\"\n                  name=\"postsPerPage\"\n                  value={settings.postsPerPage}\n                  onChange={handleChange}\n                  className=\"form-control\"\n                  min=\"1\"\n                  max=\"50\"\n                />\n              </div>\n            </div>\n\n            <div className=\"form-section\">\n              <h3>Cài đặt tương tác</h3>\n\n              <div className=\"form-check\">\n                <input\n                  type=\"checkbox\"\n                  id=\"enableComments\"\n                  name=\"enableComments\"\n                  checked={settings.enableComments}\n                  onChange={handleChange}\n                  className=\"form-check-input\"\n                />\n                <label htmlFor=\"enableComments\" className=\"form-check-label\">\n                  Cho phép bình luận\n                </label>\n              </div>\n\n              <div className=\"form-check\">\n                <input\n                  type=\"checkbox\"\n                  id=\"enableRegistration\"\n                  name=\"enableRegistration\"\n                  checked={settings.enableRegistration}\n                  onChange={handleChange}\n                  className=\"form-check-input\"\n                />\n                <label htmlFor=\"enableRegistration\" className=\"form-check-label\">\n                  Cho phép đăng ký tài khoản mới\n                </label>\n              </div>\n            </div>\n\n            <div className=\"form-actions\">\n              <button type=\"submit\" className=\"btn-save\" disabled={saving}>\n                {saving ? 'Đang lưu...' : 'Lưu cài đặt'}\n              </button>\n            </div>\n          </form>\n        </div>\n      </div>\n    </div>\n  );\n};\n\nexport default Settings;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}